{
    "version": "https://jsonfeed.org/version/1",
    "title": "Will • All posts by \"centos7\" tag",
    "description": "愿你一生努力，一生被爱",
    "home_page_url": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io",
    "items": [
        {
            "id": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-MongoDB/",
            "url": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-MongoDB/",
            "title": "Centos7-MongoDB",
            "date_published": "2023-05-28T13:00:29.412Z",
            "content_html": "<h1 id=\"离线安装\"><a href=\"#离线安装\" class=\"headerlink\" title=\"离线安装\"></a>离线安装</h1><h2 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h2><p>根据自己的要求下载tar包，<a href=\"https://www.mongodb.com/try/download/community2\">点击此链接选择进行下载</a></p>\n<p>博猪下载版本为<code>mongodb-linux-x86_64-rhel70-4.4.17.tgz</code></p>\n<h2 id=\"上传安装包\"><a href=\"#上传安装包\" class=\"headerlink\" title=\"上传安装包\"></a>上传安装包</h2><h2 id=\"解压压缩包\"><a href=\"#解压压缩包\" class=\"headerlink\" title=\"解压压缩包\"></a>解压压缩包</h2><p>解压到 &#x2F;opt 目录下，并重命名</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">tar zxvf mongodb-linux-x86_64-rhel70-4.4.17.tgz -C /opt<br><br>mv mongodb-linux-x86_64-rhel70-6.0.0 mongodb<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h2><p>在 &#x2F;etc&#x2F;profile 中加入下面一行：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">export PATH=/opt/mongodb/bin:$PATH<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">刷新配置</span><br>source /etc/profile<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"创建数据库目录和日志目录\"><a href=\"#创建数据库目录和日志目录\" class=\"headerlink\" title=\"创建数据库目录和日志目录\"></a>创建数据库目录和日志目录</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mkdir -p /opt/mongodb/logs  # 日志目录<br>mkdir -p /opt/mongodb/db  # 数据库目录<br><br>touch /opt/mongodb/logs/mongodb.log  # 创建日志文件<br>chmod 777 /opt/mongodb/logs<br>chmod 777 /opt/mongodb/db<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"创建配置文件\"><a href=\"#创建配置文件\" class=\"headerlink\" title=\"创建配置文件\"></a>创建配置文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">vi /opt/mongodb/mongodb.conf<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-attr\">port</span>= <span class=\"hljs-string\">27017</span><br><span class=\"hljs-attr\">dbpath</span>=<span class=\"hljs-string\">/opt/mongodb/db  # 指定数据库路径</span><br><span class=\"hljs-attr\">logpath</span>=<span class=\"hljs-string\">/opt/mongodb/logs/mongodb.log # 指定日志文件路径</span><br><span class=\"hljs-attr\">logappend</span>=<span class=\"hljs-string\">true  # 使用追加方式写日志</span><br><span class=\"hljs-attr\">fork</span>=<span class=\"hljs-string\">true  # 以守护进程的方式运行</span><br><span class=\"hljs-attr\">maxConns</span>=<span class=\"hljs-string\">100  # 最大同时连接数</span><br><span class=\"hljs-attr\">noauth</span>=<span class=\"hljs-string\">true  # 不启用验证</span><br><span class=\"hljs-attr\">journal</span>=<span class=\"hljs-string\">true  # 每次写入会记录一条操作日志</span><br><span class=\"hljs-attr\">storageEngine</span>=<span class=\"hljs-string\">wiredTiger # 存储引擎</span><br><span class=\"hljs-attr\">bind_ip</span>=<span class=\"hljs-string\">0.0.0.0 # 服务绑定地址</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"启动mongodb\"><a href=\"#启动mongodb\" class=\"headerlink\" title=\"启动mongodb\"></a>启动mongodb</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mongod --config /opt/mongodb/mongodb.conf<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"启用授权验证\"><a href=\"#启用授权验证\" class=\"headerlink\" title=\"启用授权验证\"></a>启用授权验证</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mongod --config /opt/mongodb/mongodb.conf --auth<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"停止-mongodb\"><a href=\"#停止-mongodb\" class=\"headerlink\" title=\"停止 mongodb\"></a>停止 mongodb</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mongod --config /opt/mongodb/mongodb.conf --shutdown<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"配置开机启动\"><a href=\"#配置开机启动\" class=\"headerlink\" title=\"配置开机启动\"></a>配置开机启动</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">vim /etc/init.d/mongodb<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\">#</span><span class=\"language-bash\">!/bin/sh</span><br><span class=\"hljs-meta prompt_\">#</span><span class=\"language-bash\"></span><br><span class=\"language-bash\"><span class=\"hljs-comment\">#chkconfig: 2345 80 90</span></span><br><span class=\"hljs-meta prompt_\">#</span><span class=\"language-bash\">description: mongodb</span><br>start() &#123;<br> /opt/mongodb/bin/mongod --config /opt/mongodb/mongodb.conf<br>&#125;<br> <br>stop() &#123;<br>  /opt/mongodb/bin/mongod --config /opt/mongodb/mongodb.conf --shutdown<br>&#125;<br> <br>case &quot;$1&quot; in<br>  start)<br> start<br> ;;<br>  stop)<br> stop<br> ;;<br>  restart)<br> stop<br> start<br> ;;<br>  *)<br> echo $&quot;Usage: $0 &#123;start|stop|restart&#125;&quot;<br> exit 1<br>esac<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /etc/init.d/<br><br>sudo chkconfig --add mongodb<br>sudo chmod +x  mongodb<br>sudo chkconfig mongodb on<br></code></pre></td></tr></table></figure>\n\n<p>配置完成后可使用以下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">启动mongodb：</span><br>service mongodb start<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">停止mongodb：</span><br>service mongodb stop<br></code></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：上述启动为root账户启动，权限太大，如果需要启用验证，则需要将配置文件（&#x2F;opt&#x2F;mongodb&#x2F;mongodb.conf）中的 noauth 设置为 false</p>\n</blockquote>\n<h1 id=\"Yum源安装\"><a href=\"#Yum源安装\" class=\"headerlink\" title=\"Yum源安装\"></a>Yum源安装</h1><h2 id=\"创建存储源文件夹\"><a href=\"#创建存储源文件夹\" class=\"headerlink\" title=\"创建存储源文件夹\"></a>创建存储源文件夹</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">mkdir -p /opt/rpm_repo<br>cd /opt/rpm_repo\t<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"下载MongoDBYum源\"><a href=\"#下载MongoDBYum源\" class=\"headerlink\" title=\"下载MongoDBYum源\"></a>下载MongoDBYum源</h2><blockquote>\n<p>根据自己的要求下载tar包，<a href=\"https://www.mongodb.com/try/download/community2\">点击此链接选择进行下载</a>,选择一下三个选项，右键<code>Download</code>,复制链接地址即可。</p>\n<p><img src=\"http://tva1.sinaimg.cn/large/0086NgqGly1h7acvnupi8j313d0mp7ak.jpg\" alt=\"image.png\"></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">shell-rpm</span><br>wget https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.4/x86_64/RPMS/mongodb-org-shell-4.4.17-1.el7.x86_64.rpm<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">server-rpm</span><br>wget https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.4/x86_64/RPMS/mongodb-org-server-4.4.17-1.el7.x86_64.rpm<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">mongos-rpm</span><br>wget https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.4/x86_64/RPMS/mongodb-org-mongos-4.4.17-1.el7.x86_64.rpm<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"使用Yum安装\"><a href=\"#使用Yum安装\" class=\"headerlink\" title=\"使用Yum安装\"></a>使用Yum安装</h2><blockquote>\n<p>使用 yum 安装 mongodb，可以解决依赖包问题</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">yum install -y mongodb-org-*.rpm<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"查询MongoDB状态\"><a href=\"#查询MongoDB状态\" class=\"headerlink\" title=\"查询MongoDB状态\"></a>查询MongoDB状态</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">systemctl status mongod<br></code></pre></td></tr></table></figure>\n\n<p>如果启动，则需要停止运行，停止命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">systemctl stop mongod<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"修改MongoDB配置文件\"><a href=\"#修改MongoDB配置文件\" class=\"headerlink\" title=\"修改MongoDB配置文件\"></a>修改MongoDB配置文件</h2><ul>\n<li>备份配置文件</li>\n<li>备份配置文件</li>\n<li>备份配置文件</li>\n</ul>\n<p>重要的事情说三遍！！！！</p>\n<blockquote>\n<p>一般yum安装配置信息都在<code>/etc</code></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /etc<br>cp mongod.conf mongod.conf.bak<br></code></pre></td></tr></table></figure>\n\n<p>修改配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">vi mongod.conf<br></code></pre></td></tr></table></figure>\n\n<p>最终文件配置如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-comment\"># mongod.conf</span><br><br><span class=\"hljs-comment\"># for documentation of all options, see:</span><br><span class=\"hljs-comment\">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br><br><span class=\"hljs-comment\"># where to write logging data.</span><br><span class=\"hljs-attr\">systemLog:</span><br>  <span class=\"hljs-attr\">destination:</span> <span class=\"hljs-string\">file</span><br>  <span class=\"hljs-attr\">logAppend:</span> <span class=\"hljs-literal\">true</span><br>  <span class=\"hljs-comment\"># 指定日志文件路径</span><br>  <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">/opt/mongodb/logs/mongod.log</span><br><br><span class=\"hljs-comment\"># Where and how to store data.</span><br><span class=\"hljs-attr\">storage:</span><br>  <span class=\"hljs-comment\"># 指定数据库路径</span><br>  <span class=\"hljs-attr\">dbPath:</span> <span class=\"hljs-string\">/opt/mongodb/db</span><br>  <span class=\"hljs-comment\"># 每次写入会记录一条操作日志</span><br>  <span class=\"hljs-attr\">journal:</span><br>    <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-comment\">#  engine:</span><br><span class=\"hljs-comment\">#  wiredTiger:</span><br><br><span class=\"hljs-comment\"># how the process runs</span><br><span class=\"hljs-attr\">processManagement:</span><br>  <span class=\"hljs-comment\"># 以守护进程的方式运行</span><br>  <span class=\"hljs-attr\">fork:</span> <span class=\"hljs-literal\">true</span>  <span class=\"hljs-comment\"># fork and run in background</span><br>  <span class=\"hljs-attr\">pidFilePath:</span> <span class=\"hljs-string\">/var/run/mongodb/mongod.pid</span>  <span class=\"hljs-comment\"># location of pidfile</span><br>  <span class=\"hljs-attr\">timeZoneInfo:</span> <span class=\"hljs-string\">/usr/share/zoneinfo</span><br><br><span class=\"hljs-comment\"># network interfaces</span><br><span class=\"hljs-attr\">net:</span><br>  <span class=\"hljs-comment\"># 配置端口</span><br>  <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">37017</span><br>  <span class=\"hljs-comment\"># 服务绑定地址</span><br>  <span class=\"hljs-comment\"># 输入0.0.0.0，::绑定所有IPv4和IPv6地址，或者使用网络。bindIpAll设置</span><br>  <span class=\"hljs-attr\">bindIp:</span> <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span>  <span class=\"hljs-comment\"># Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.</span><br><br><br><span class=\"hljs-comment\">#security:</span><br><br><span class=\"hljs-comment\">#operationProfiling:</span><br><br><span class=\"hljs-comment\">#replication:</span><br><br><span class=\"hljs-comment\">#sharding:</span><br><br><span class=\"hljs-comment\">## Enterprise-Only Options</span><br><br><span class=\"hljs-comment\">#auditLog:</span><br><br><span class=\"hljs-comment\">#snmp:</span><br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "Linux",
                "CentOS7",
                "MongoDB"
            ]
        },
        {
            "id": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-Redis/",
            "url": "https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Linux/Centos7/Centos7-Redis/",
            "title": "Centos7-Redis",
            "date_published": "2023-05-28T13:00:29.412Z",
            "content_html": "<h1 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h1><p>redis是由C语言开发，因此安装之前必须要确保服务器已经安装了gcc，可以通过如下命令查看机器是否安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">gcc -v<br></code></pre></td></tr></table></figure>\n\n<p>如果没有安装则通过以下命令安装：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">yum install -y gcc<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h1><blockquote>\n<p>下载redis安装包并解压，<a href=\"https://redis.io/download/#redis-downloads\">点击此链接跳转到</a>​<a href=\"https://redis.io/download/#redis-downloads\"><code>Redis</code></a>​<a href=\"https://redis.io/download/#redis-downloads\">下载页面</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /opt<br><span class=\"hljs-meta prompt_\"></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">下载，我是在opt下执行的下载，所以我的下载目录为：/opt/redis-&#123;version-number&#125;，这里按照自己的实际情况调整</span><br>wget https://github.com/redis/redis/archive/7.0.5.tar.gz<br>mv 7.0.5.tar.gz redis-7.0.5.tar.gz<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">解压</span><br>tar -zxvf redis-7.0.5.tar.gz<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">进入解压目录</span><br>cd redis-7.0.5<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">编译</span><br>make<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"指定安装目录并进行安装\"><a href=\"#指定安装目录并进行安装\" class=\"headerlink\" title=\"指定安装目录并进行安装\"></a>指定安装目录并进行安装</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">这里默认安装位置为:/usr/local/redis</span><br>make install PREFIX=/usr/local/redis<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"启动Redis服务\"><a href=\"#启动Redis服务\" class=\"headerlink\" title=\"启动Redis服务\"></a>启动Redis服务</h1><h2 id=\"直接启动（不建议使用）\"><a href=\"#直接启动（不建议使用）\" class=\"headerlink\" title=\"直接启动（不建议使用）\"></a>直接启动（不建议使用）</h2><blockquote>\n<p>直接启动，使用的是redis的默认配置，不建议直接默认启动！！！！</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">进入redis安装目录</span><br>cd /usr/local/redis/bin/<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">启动服务</span><br>./redis-server<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"通过守护进程方式启动\"><a href=\"#通过守护进程方式启动\" class=\"headerlink\" title=\"通过守护进程方式启动\"></a>通过守护进程方式启动</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\"><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第一步：从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录</span><br>cp /opt/redis-7.0.5/redis.conf /usr/local/redis/bin/<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第二步：修改redis.conf配置文件</span><br>cd /usr/local/redis/bin/<br>vi redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">修改内容如下：</span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">daemonize 的值从 no 修改成 <span class=\"hljs-built_in\">yes</span></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">requirepass 123456 <span class=\"hljs-comment\"># 设置密码</span></span> <br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">127.0.0.1          <span class=\"hljs-comment\">#注释掉这行代码,以便外网访问</span></span><br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第三步：启动服务</span><br>./redis-server redis.conf<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">第四步：查看进程来确定redis是否启动成功，非必须,建议查看</span><br>ps -ef |grep redis<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"停止Redis服务\"><a href=\"#停止Redis服务\" class=\"headerlink\" title=\"停止Redis服务\"></a>停止Redis服务</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">cd</span> /usr/local/redis/bin<br>./redis-cli shutdown<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"设置开机自动启动\"><a href=\"#设置开机自动启动\" class=\"headerlink\" title=\"设置开机自动启动\"></a>设置开机自动启动</h1><p>切换到&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;目录，创建redis.service文件。命令如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">cd /lib/systemd/system/<br>vim redis.service<br></code></pre></td></tr></table></figure>\n\n<p>文件内容如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">[Unit]<br>Description=redis-server<br>After=network.target<br><br>[Service]<br>Type=forking<br><span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">ExecStart需要按照实际情况修改成自己的地址</span><br>ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf<br>PrivateTmp=true<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure>\n\n<p>设置开启自动启动</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 开机自动启动</span><br>systemctl <span class=\"hljs-built_in\">enable</span> redis.service<br><span class=\"hljs-comment\"># 启动redis服务</span><br>systemctl start redis.service<br><span class=\"hljs-comment\"># 查看服务状态</span><br>systemctl status redis.service<br><span class=\"hljs-comment\"># 停止服务</span><br>systemctl stop redis.service<br><span class=\"hljs-comment\"># 取消开机自动启动(卸载服务)</span><br>systemctl disabled redis.service<br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "CentOS7",
                "Redis"
            ]
        }
    ]
}