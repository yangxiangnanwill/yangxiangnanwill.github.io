<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="will"><meta name="keywords" content="will"><meta name="description" content="前言 由于开发架构问题，公司使用的基于SpringBoot+BeetlSql+ProtoBuffer的架子来处理业务,由于BeetlSQL和Protobuffer有些小众，特记录一下。  项目架构介绍 本文采用SpringBoot+BeetlSQL+ProtoBuffer进行快速搭建开发 PDMAN表快速设计与维护  项目准备工作SQL语句 员工信息表  1234567891011121314CR"><meta property="og:type" content="article"><meta property="og:title" content="BeetlSql&amp;ProtoBuffer实践Demo"><meta property="og:url" content="https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/JAVA/Beetl&BeetlSql/BeetlSql&ProtoBuffer%E5%AE%9E%E8%B7%B5Demo/index.html"><meta property="og:site_name" content="Will"><meta property="og:description" content="前言 由于开发架构问题，公司使用的基于SpringBoot+BeetlSql+ProtoBuffer的架子来处理业务,由于BeetlSQL和Protobuffer有些小众，特记录一下。  项目架构介绍 本文采用SpringBoot+BeetlSQL+ProtoBuffer进行快速搭建开发 PDMAN表快速设计与维护  项目准备工作SQL语句 员工信息表  1234567891011121314CR"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007194602.png"><meta property="og:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195402.png"><meta property="og:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195655.png"><meta property="og:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195737.png"><meta property="og:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195837.png"><meta property="article:published_time" content="2023-05-28T13:00:29.389Z"><meta property="article:modified_time" content="2023-06-03T14:10:25.967Z"><meta property="article:author" content="will"><meta property="article:tag" content="BeetlSql"><meta property="article:tag" content="Beetl"><meta property="article:tag" content="ProtoBuffer"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007194602.png"><title>BeetlSql&amp;ProtoBuffer实践Demo - Will</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"github.com",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>WILL</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="BeetlSql&amp;ProtoBuffer实践Demo"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-05-28 21:00" pubdate>2023年5月28日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 41k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 344 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">BeetlSql&amp;ProtoBuffer实践Demo</h1><div class="markdown-body"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>由于开发架构问题，公司使用的基于SpringBoot+BeetlSql+ProtoBuffer的架子来处理业务,由于BeetlSQL和Protobuffer有些小众，特记录一下。</p></blockquote><h1 id="项目架构介绍"><a href="#项目架构介绍" class="headerlink" title="项目架构介绍"></a>项目架构介绍</h1><ul><li>本文采用SpringBoot+BeetlSQL+ProtoBuffer进行快速搭建开发</li><li>PDMAN表快速设计与维护</li></ul><h1 id="项目准备工作"><a href="#项目准备工作" class="headerlink" title="项目准备工作"></a>项目准备工作</h1><h2 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h2><blockquote><p>员工信息表</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE `inter_employee` (<br>  `id` varchar(32) NOT NULL COMMENT &#x27;id&#x27;,<br>  `name` varchar(32) NOT NULL COMMENT &#x27;姓名&#x27;,<br>  `email` varchar(128) NOT NULL COMMENT &#x27;邮箱&#x27;,<br>  `sex` char(1) NOT NULL COMMENT &#x27;性别 0-男；1-女；2-未知&#x27;,<br>  `dept_id` bigint NOT NULL COMMENT &#x27;所属部门id&#x27;,<br>  `org_id` varchar(32) NOT NULL COMMENT &#x27;所属机构id&#x27;,<br>  `status` char(1) NOT NULL COMMENT &#x27;状态 0-无效；1-有效&#x27;,<br>  `created_by` varchar(32) DEFAULT NULL COMMENT &#x27;创建人&#x27;,<br>  `created_time` datetime DEFAULT NULL COMMENT &#x27;创建时间&#x27;,<br>  `updated_by` varchar(32) DEFAULT NULL COMMENT &#x27;更新人&#x27;,<br>  `updated_time` datetime DEFAULT NULL COMMENT &#x27;更新时间&#x27;,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT=&#x27;机构员工信息&#x27;;<br></code></pre></td></tr></table></figure><blockquote><p>员工岗位表</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE `inter_employee_job_duty` (<br>  `id` varchar(32) NOT NULL COMMENT &#x27;id&#x27;,<br>  `emp_id` varchar(32) NOT NULL COMMENT &#x27;员工ID&#x27;,<br>  `emp_job` varchar(32) NOT NULL COMMENT &#x27;员工岗位 CODE-开发；HR-人事经理&#x27;,<br>  `job_name` varchar(32) NOT NULL COMMENT &#x27;岗位名称 CODE-开发；HR-人事经理&#x27;,<br>  PRIMARY KEY (`id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT=&#x27;机构员工岗位表 员工可能会存在多个岗位，权限以角色为主，数据权限以岗位为主,员工-岗位：one2many关系&#x27;;<br></code></pre></td></tr></table></figure><h2 id="相关环境"><a href="#相关环境" class="headerlink" title="相关环境"></a>相关环境</h2><ul><li>jdk 1.8+</li><li>mysql 5.7</li><li>Lombok</li></ul><h1 id="项目案例"><a href="#项目案例" class="headerlink" title="项目案例"></a>项目案例</h1><h2 id="项目层级"><a href="#项目层级" class="headerlink" title="项目层级"></a>项目层级</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tex">├── pom.xml<br>├── src<br>│   ├── main<br>│   │   ├── Doc<br>│   │   ├── java<br>│   │   ├── protobuf<br>│   │   └── resources<br>│   └── test<br>│       └── java<br></code></pre></td></tr></table></figure><h2 id="相关依赖"><a href="#相关依赖" class="headerlink" title="相关依赖"></a>相关依赖</h2><blockquote><h3 id="引入springboot父项目依赖"><a href="#引入springboot父项目依赖" class="headerlink" title="引入springboot父项目依赖"></a>引入springboot父项目依赖</h3></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.3.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><h3 id="设置相关版本"><a href="#设置相关版本" class="headerlink" title="设置相关版本"></a>设置相关版本</h3></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">log4jdbc.version</span>&gt;</span>1.16<span class="hljs-tag">&lt;/<span class="hljs-name">log4jdbc.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">fastjson.version</span>&gt;</span>1.2.54<span class="hljs-tag">&lt;/<span class="hljs-name">fastjson.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">druid.version</span>&gt;</span>1.1.14<span class="hljs-tag">&lt;/<span class="hljs-name">druid.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>引入相关依赖</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Spring boot start --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Spring boot end --&gt;</span><br>    <span class="hljs-comment">&lt;!-- beetlSql --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ibeetl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>beetl-framework-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.81.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--监控sql日志 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.bgee.log4jdbc-log4j2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4jdbc-log4j2-jdbc4.1<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;log4jdbc.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Mysql依赖包 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- druid数据源驱动 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--lombok插件 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- fastjson --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--google protobuf 引用 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.protobuf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>protobuf-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.protobuf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>protobuf-java-util<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><h3 id="引入ProtoBuffer和Maven编译工具"><a href="#引入ProtoBuffer和Maven编译工具" class="headerlink" title="引入ProtoBuffer和Maven编译工具"></a>引入ProtoBuffer和Maven编译工具</h3></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 跳过单元测试 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- set encoding to something not platform dependent --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.os72<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>protoc-jar-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>generate-sources<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">addProtoSources</span>&gt;</span>all<span class="hljs-tag">&lt;/<span class="hljs-name">addProtoSources</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">includeStdTypes</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">includeStdTypes</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">includeMavenTypes</span>&gt;</span>direct<span class="hljs-tag">&lt;/<span class="hljs-name">includeMavenTypes</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!-- &lt;type&gt;java-shaded&lt;/type&gt; &lt;addSources&gt;none&lt;/addSources&gt; --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">includeDirectories</span>&gt;</span><br>                            <span class="hljs-comment">&lt;!-- &lt;include&gt;com/idasound/protobuf&lt;/include&gt; --&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">includeDirectories</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">inputDirectories</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>src/main/protobuf<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>                            <span class="hljs-comment">&lt;!-- &lt;include&gt;$&#123;project.basedir&#125;&lt;/include&gt; --&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">inputDirectories</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--This plugin&#x27;s configuration is used to store Eclipse m2e settings</span><br><span class="hljs-comment">                only. It has no influence on the Maven build itself. --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.eclipse.m2e<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lifecycle-mapping<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">lifecycleMappingMetadata</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">pluginExecutions</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">pluginExecution</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">pluginExecutionFilter</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span><br>                                        com.github.os72<br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span><br>                                        protoc-jar-maven-plugin<br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">versionRange</span>&gt;</span><br>                                        [3.6.0.1,)<br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">versionRange</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">pluginExecutionFilter</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">action</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">ignore</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ignore</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">action</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">pluginExecution</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">pluginExecutions</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">lifecycleMappingMetadata</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="相关配置"><a href="#相关配置" class="headerlink" title="相关配置"></a>相关配置</h2><blockquote><h4 id="配置application-yml文件"><a href="#配置application-yml文件" class="headerlink" title="配置application.yml文件"></a>配置application.yml文件</h4></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">beetlSqlDemo-api</span><br><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">servlet:</span><br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/beetlSqlDemo</span><br></code></pre></td></tr></table></figure><blockquote><h4 id="配置dev【application-dev-yml】环境"><a href="#配置dev【application-dev-yml】环境" class="headerlink" title="配置dev【application-dev.yml】环境"></a>配置dev【application-dev.yml】环境</h4></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br>  <span class="hljs-attr">tomcat:</span><br>    <span class="hljs-attr">max-swallow-size:</span> <span class="hljs-string">100MB</span><br><br><span class="hljs-comment">#配置数据源</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>      <span class="hljs-attr">driverClassName:</span> <span class="hljs-string">net.sf.log4jdbc.sql.jdbcapi.DriverSpy</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:log4jdbc:mysql://localhost:3306/beetsql_Demo?serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8&amp;useSSL=false&amp;&amp;allowPublicKeyRetrieval=true</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-number">12345678</span><br><br>      <span class="hljs-comment"># 初始化连接大小</span><br>      <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span><br>      <span class="hljs-comment"># 最小空闲连接数</span><br>      <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span><br>      <span class="hljs-attr">max-active:</span> <span class="hljs-number">30</span><br>      <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span><br>      <span class="hljs-comment"># 可关闭的空闲连接间隔时间</span><br>      <span class="hljs-attr">time-between-eviction-runs-millis:</span> <span class="hljs-number">60000</span><br>      <span class="hljs-comment"># 配置连接在池中的最小生存时间</span><br>      <span class="hljs-attr">min-evictable-idle-time-millis:</span> <span class="hljs-number">300000</span><br>      <span class="hljs-attr">validation-query:</span> <span class="hljs-string">select</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-string">from</span> <span class="hljs-string">dual</span><br>      <span class="hljs-attr">test-while-idle:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">test-on-borrow:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-attr">test-on-return:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-comment"># 打开PSCache，并且指定每个连接上PSCache的大小</span><br>      <span class="hljs-attr">pool-prepared-statements:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">max-open-prepared-statements:</span> <span class="hljs-number">50</span><br>      <span class="hljs-attr">max-pool-prepared-statement-per-connection-size:</span> <span class="hljs-number">20</span><br>      <span class="hljs-comment"># 配置监控统计拦截的filters</span><br>      <span class="hljs-attr">filters:</span> <span class="hljs-string">stat</span><br><br>      <span class="hljs-attr">stat-view-servlet:</span><br>        <span class="hljs-attr">url-pattern:</span> <span class="hljs-string">/druid/*</span><br>        <span class="hljs-attr">reset-enable:</span> <span class="hljs-literal">false</span><br>        <span class="hljs-attr">login-username:</span> <span class="hljs-string">admin</span><br>        <span class="hljs-attr">login-password:</span> <span class="hljs-number">123456</span><br><br>      <span class="hljs-attr">web-stat-filter:</span><br>        <span class="hljs-attr">url-pattern:</span> <span class="hljs-string">/*</span><br>        <span class="hljs-attr">exclusions:</span> <span class="hljs-string">&quot;*.js,*.gif,*.jpg,*.bmp,*.png,*.css,*.ico,/druid/*&quot;</span><br><br>  <span class="hljs-attr">servlet:</span><br>    <span class="hljs-attr">multipart:</span><br>      <span class="hljs-attr">max-file-size:</span> <span class="hljs-string">50MB</span><br>      <span class="hljs-attr">max-request-size:</span> <span class="hljs-string">50MB</span><br><br><span class="hljs-attr">sys:</span><br>  <span class="hljs-attr">log:</span><br>    <span class="hljs-attr">isSaveLog:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">file:</span> <span class="hljs-string">D:/logs/beetsqlDemo/dev/beetsqlDemo.log</span><br>  <span class="hljs-attr">config:</span> <span class="hljs-string">classpath:logback-dev.xml</span><br></code></pre></td></tr></table></figure><blockquote><h4 id="配置日志"><a href="#配置日志" class="headerlink" title="配置日志"></a>配置日志</h4></blockquote><ul><li><p>配置logback文件</p><blockquote><ul><li><p>创建log4jdbc.log4j2.properties文件</p></li><li><p>配置如下属性：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># If you use SLF4J. First, you need to tell log4jdbc-log4j2 that you want to use the SLF4J logger</span><br><span class="hljs-attr">log4jdbc.spylogdelegator.name</span>=<span class="hljs-string">net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator</span><br></code></pre></td></tr></table></figure></li></ul></blockquote></li><li><p>配置logback</p><blockquote><ul><li><p>创建logback-dev.xml</p></li><li><p>配置如下属性：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span> <span class="hljs-attr">scan</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">scanPeriod</span>=<span class="hljs-string">&quot;60 seconds&quot;</span> <span class="hljs-attr">debug</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">contextName</span>&gt;</span>beetlSqlDemo<span class="hljs-tag">&lt;/<span class="hljs-name">contextName</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;LOG_HOME&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;D:/logs/beetSqlDemo/dev&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;LOG_NAME&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beetlSqlDemo&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;springProperty scope=&quot;context&quot; name=&quot;LOG_HOME&quot; source=&quot;sys.log.output.path&quot;/&gt;--&gt;</span><br><br>    <span class="hljs-comment">&lt;!--输出到控制台--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;console&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%black(%contextName-) %red(%d&#123;yyyy-MM-dd HH:mm:ss&#125;) %green([%thread]) %highlight(%-5level) %boldMagenta(%logger&#123;36&#125;) - %gray(%msg%n)<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">charset</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">charset</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;FILE_LOG_OUT&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;LOG_NAME&#125;.log<span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">append</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">append</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%contextName- %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %class&#123;36&#125; %L %M - %msg%xEx%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">fileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;$&#123;file.separator&#125;$&#123;LOG_NAME&#125;.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="hljs-tag">&lt;/<span class="hljs-name">fileNamePattern</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">maxHistory</span>&gt;</span>180<span class="hljs-tag">&lt;/<span class="hljs-name">maxHistory</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">maxFileSize</span>&gt;</span>100MB<span class="hljs-tag">&lt;/<span class="hljs-name">maxFileSize</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--普通日志输出到控制台--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.wabestway&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE_LOG_OUT&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.idasound.isb&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE_LOG_OUT&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--监控sql日志输出 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.sqlonly&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;INFO&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE_LOG_OUT&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.resultset&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;ERROR&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;FILE_LOG_OUT&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.resultsettable&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;OFF&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.connection&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;OFF&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.sqltiming&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;OFF&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbc.audit&quot;</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;OFF&quot;</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;console&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><br></code></pre></td></tr></table></figure></li></ul></blockquote></li></ul><h2 id="Demo实现"><a href="#Demo实现" class="headerlink" title="Demo实现"></a>Demo实现</h2><h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><blockquote><p>创建员工信息</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.model;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.AssignID;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.Table;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 机构员工信息</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Title</span>: InterEmployee.java</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 13:43:25</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Table(name=&quot;inter_employee&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployee</span> &#123;<br>    <span class="hljs-meta">@AssignID</span><br>    <span class="hljs-keyword">private</span> String id; <span class="hljs-comment">//id</span><br>    <span class="hljs-keyword">private</span> String name; <span class="hljs-comment">//姓名</span><br>    <span class="hljs-keyword">private</span> String email; <span class="hljs-comment">//邮箱</span><br>    <span class="hljs-keyword">private</span> String sex; <span class="hljs-comment">//性别 0-男；1-女；2-未知</span><br>    <span class="hljs-keyword">private</span> Long deptId; <span class="hljs-comment">//所属部门id</span><br>    <span class="hljs-keyword">private</span> String orgId; <span class="hljs-comment">//所属机构id</span><br>    <span class="hljs-keyword">private</span> String status; <span class="hljs-comment">//状态 0-无效；1-有效</span><br>    <span class="hljs-keyword">private</span> String createdBy; <span class="hljs-comment">//创建人</span><br>    <span class="hljs-meta">@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;,timezone=&quot;GMT+8&quot;)</span><br>    <span class="hljs-keyword">private</span> Date createdTime; <span class="hljs-comment">//创建时间</span><br>    <span class="hljs-keyword">private</span> String updatedBy; <span class="hljs-comment">//更新人</span><br>    <span class="hljs-meta">@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;,timezone=&quot;GMT+8&quot;)</span><br>    <span class="hljs-keyword">private</span> Date updatedTime; <span class="hljs-comment">//更新时间</span><br>    <span class="hljs-keyword">private</span> List&lt;String&gt; jobDuties;<br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>创建岗位表</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.model;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.AssignID;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.Table;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 机构员工岗位表 员工可能会存在多个岗位，权限以角色为主，数据权限以岗位为主,员工-岗位：one2many关系</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Title</span>: InterEmployeeJobDuty.java</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:24:13</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Table(name=&quot;inter_employee_job_duty&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployeeJobDuty</span> &#123;<br>    <span class="hljs-meta">@AssignID</span><br>    <span class="hljs-keyword">private</span> String id; <span class="hljs-comment">//id</span><br>    <span class="hljs-keyword">private</span> String empId; <span class="hljs-comment">//员工ID</span><br>    <span class="hljs-keyword">private</span> String empJob; <span class="hljs-comment">//员工岗位 CODE-开发；HR-人事经理</span><br>    <span class="hljs-keyword">private</span> String jobName; <span class="hljs-comment">//岗位名称 CODE-开发；HR-人事经理</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="SQL文件"><a href="#SQL文件" class="headerlink" title="SQL文件"></a>SQL文件</h3><blockquote><p>**BeetlSql的SQL文件扫描默认路径为resources&#x2F;sql，所以我们为了简便开发使用Beetlsql的默认配置。</p></blockquote><ul><li><p>在resources下创建一个名字为<em>sql</em>文件夹</p></li><li><p>增加文件，实现相关业务</p><blockquote><ul><li><p>interEmployeeExtra.md</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">listCols</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    t.id id, t.name name, t.email email, t.sex sex, t.dept_id deptId, t.org_id orgId, t.status status</span><br><span class="hljs-code">    , t.created_by createdBy, t.created_time createdTime, t.updated_by updatedBy, t.updated_time updatedTime</span><br><span class="hljs-code"></span><br><span class="hljs-section">queryByCondition</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    select #use(&quot;listCols&quot;)# </span><br><span class="hljs-code">    from inter_employee t</span><br><span class="hljs-code">    where #use(&quot;condition&quot;)# </span><br><span class="hljs-code"></span><br><span class="hljs-section">queryByCondition$count</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    select count(1) total,count(t.id) empNums</span><br><span class="hljs-code">    from inter_employee t</span><br><span class="hljs-code">    where #use(&quot;condition&quot;)# </span><br><span class="hljs-code"></span><br><br><span class="hljs-section">condition</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    1 = 1  </span><br><span class="hljs-code">    @if(!isEmpty(id))&#123;</span><br><span class="hljs-code">        and t.id = #id#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(name))&#123;</span><br><span class="hljs-code">        and t.name = #name#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(email))&#123;</span><br><span class="hljs-code">        and t.email = #email#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(sex))&#123;</span><br><span class="hljs-code">        and t.sex = #sex#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(deptId))&#123;</span><br><span class="hljs-code">        and t.dept_id = #deptId#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(orgId))&#123;</span><br><span class="hljs-code">        and t.org_id = #orgId#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(status))&#123;</span><br><span class="hljs-code">        and t.status = #status#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(createdBy))&#123;</span><br><span class="hljs-code">        and t.created_by = #createdBy#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(createdTime))&#123;</span><br><span class="hljs-code">        and t.created_time = #createdTime#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(updatedBy))&#123;</span><br><span class="hljs-code">        and t.updated_by = #updatedBy#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(updatedTime))&#123;</span><br><span class="hljs-code">        and t.updated_time = #updatedTime#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(jobDuties))&#123;</span><br><span class="hljs-code">        and EXISTS (SELECT 1 FROM inter_employee_job_duty jd WHERE jd.emp_id = t.id AND jd.emp_job IN (#join(jobDuties)#))</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code"></span><br><span class="hljs-section">delInterEmployeeById</span><br><span class="hljs-section">===</span><br><span class="hljs-bullet">*</span> 逻辑删除<br><br><span class="hljs-code">    update inter_employee t set t.status = &#x27;0&#x27;, t.updated_by = #updatedBy#, t.updated_time = now() where t.id = #id#</span><br><span class="hljs-code"></span><br><span class="hljs-section">batchDelInterEmployeeByIds</span><br><span class="hljs-section">===</span><br><span class="hljs-bullet">*</span> 批量逻辑删除<br><br><span class="hljs-code">    update inter_employee t set t.status = &#x27;0&#x27;, t.updated_by = #updatedBy#, t.updated_time = now() where t.id  in( #join(ids)#)</span><br></code></pre></td></tr></table></figure></li><li><p>interEmployeeJobDutyExtra.md</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">listCols</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    t.id id, t.emp_id empId, t.emp_job empJob, t.job_name jobName</span><br><span class="hljs-code"></span><br><span class="hljs-section">queryByCondition</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    select #use(&quot;listCols&quot;)# </span><br><span class="hljs-code">    from inter_employee_job_duty t</span><br><span class="hljs-code">    where #use(&quot;condition&quot;)# </span><br><span class="hljs-code"></span><br><span class="hljs-section">queryByCondition$count</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    select count(1)</span><br><span class="hljs-code">    from inter_employee_job_duty t</span><br><span class="hljs-code">    where #use(&quot;condition&quot;)# </span><br><span class="hljs-code"></span><br><br><span class="hljs-section">condition</span><br><span class="hljs-section">===</span><br><span class="hljs-code">    1 = 1  </span><br><span class="hljs-code">    @if(!isEmpty(id))&#123;</span><br><span class="hljs-code">        and t.id = #id#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(empId))&#123;</span><br><span class="hljs-code">        and t.emp_id = #empId#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(empJob))&#123;</span><br><span class="hljs-code">        and t.emp_job = #empJob#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code">    @if(!isEmpty(jobName))&#123;</span><br><span class="hljs-code">        and t.job_name = #jobName#</span><br><span class="hljs-code">    @&#125;</span><br><span class="hljs-code"></span><br><span class="hljs-section">delInterEmployeeJobDutyById</span><br><span class="hljs-section">===</span><br><span class="hljs-bullet">*</span> 逻辑删除<br><br><span class="hljs-code">    update inter_employee_job_duty t set t.status = &#x27;0&#x27;, t.updated_by = #updatedBy#, t.updated_time = now() where t.id = #id#</span><br><span class="hljs-code"></span><br><span class="hljs-section">batchDelInterEmployeeJobDutyByIds</span><br><span class="hljs-section">===</span><br><span class="hljs-bullet">*</span> 批量逻辑删除<br><br><span class="hljs-code">    update inter_employee_job_duty t set t.status = &#x27;0&#x27;, t.updated_by = #updatedBy#, t.updated_time = now() where t.id  in( #join(ids)#)</span><br></code></pre></td></tr></table></figure></li></ul></blockquote></li></ul><h3 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h3><blockquote><p>创建repository文件夹</p></blockquote><ul><li>InterEmployeeDao</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.repository;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.ext.MyBaseMapper;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployee;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlResource;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlStatement;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployee Dao</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 13:43:25</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SqlResource(&quot;interEmployeeExtra&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterEmployeeDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyBaseMapper</span>&lt;InterEmployee&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: query      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: PageQuery </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployee&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(PageQuery query)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 不分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployee      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: List </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> List&lt;InterEmployee&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(InterEmployee interEmployee)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployee      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;id,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delInterEmployeeById</span><span class="hljs-params">(String id, String updatedBy)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 批量逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: batchDelAppUserByIds</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: ids</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: updatedBy</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;ids,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">batchDelInterEmployeeByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>InterEmployeeJobDutyDao</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.repository;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployeeJobDuty;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlResource;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlStatement;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.mapper.BaseMapper;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployeeJobDuty Dao</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:24:13</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SqlResource(&quot;interEmployeeJobDutyExtra&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterEmployeeJobDutyDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;InterEmployeeJobDuty&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: query      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: PageQuery </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(PageQuery query)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 不分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: List </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> List&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;id,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delInterEmployeeJobDutyById</span><span class="hljs-params">(String id, String updatedBy)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 批量逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: batchDelAppUserByIds</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: ids</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: updatedBy</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;ids,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">batchDelInterEmployeeJobDutyByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><h4 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h4><ul><li>InterEmployeeService</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.repository;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployeeJobDuty;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlResource;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.annotatoin.SqlStatement;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.mapper.BaseMapper;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployeeJobDuty Dao</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:24:13</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SqlResource(&quot;interEmployeeJobDutyExtra&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterEmployeeJobDutyDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;InterEmployeeJobDuty&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: query      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: PageQuery </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(PageQuery query)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 不分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: List </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> List&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;id,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delInterEmployeeJobDutyById</span><span class="hljs-params">(String id, String updatedBy)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 批量逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: batchDelAppUserByIds</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: ids</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: updatedBy</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SqlStatement(params = &quot;ids,updatedBy&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">batchDelInterEmployeeJobDutyByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>InterEmployeeJobDutyService</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.service;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployeeJobDuty;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployeeJobDuty Service</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:24:13</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterEmployeeJobDutyService</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 分页查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: pageNum 页码</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: pageSize 每页数量</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: InterEmployeeJobDuty 参数对象</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: orderBy 排序方式</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: pageQuery</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(<span class="hljs-type">long</span> pageNum, <span class="hljs-type">long</span> pageSize, InterEmployeeJobDuty paramDto, String orderBy)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据条件查询，不分页</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryInterEmployeeJobDutyList</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: list</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> List&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryInterEmployeeJobDutyList</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id查询InterEmployeeJobDuty</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryInterEmployeeJobDutyById  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: id      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: void </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> InterEmployeeJobDuty <span class="hljs-title function_">queryInterEmployeeJobDutyById</span><span class="hljs-params">(String id)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 保存InterEmployeeJobDuty</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: queryByCondition  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveInterEmployeeJobDuty</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 更新InterEmployeeJobDuty</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: updateInterEmployeeJobDuty  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: interEmployeeJobDuty      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: boolean      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">updateInterEmployeeJobDuty</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 逻辑删除InterEmployeeJobDuty</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: delInterEmployeeJobDutyById  </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: id      </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: updatedBy</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: boolean </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">delInterEmployeeJobDutyById</span><span class="hljs-params">(String id, String updatedBy)</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 批量逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Title</span>: batchDelInterEmployeeJobDutyByIds</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: ids</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>: updatedBy</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: boolean</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchDelInterEmployeeJobDutyByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="接口实现"><a href="#接口实现" class="headerlink" title="接口实现"></a>接口实现</h4><blockquote><p>在service下创建impl文件夹进行service的接口实现。</p></blockquote><ul><li>InterEmployeeServiceImpl</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.service.impl;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.common.MyPageQuery;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployee;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.repository.InterEmployeeDao;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.service.InterEmployeeService;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.SQLManager;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><span class="hljs-keyword">import</span> org.springframework.util.StringUtils;<br><br><span class="hljs-keyword">import</span> javax.transaction.Transactional;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployee ServiceImpl</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 13:43:25</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployeeServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InterEmployeeService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> SQLManager sqlManager;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> InterEmployeeDao interEmployeeDao;<br><br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployee&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(<span class="hljs-type">long</span> pageNum, <span class="hljs-type">long</span> pageSize, InterEmployee paramDto, String orderBy)</span> &#123;<br>        PageQuery&lt;InterEmployee&gt; pageQuery = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageQuery</span>&lt;InterEmployee&gt;(pageNum, pageSize, paramDto);<br>        pageQuery.setOrderBy(orderBy);<br>        sqlManager.pageQuery(<span class="hljs-string">&quot;interEmployeeExtra.queryByCondition&quot;</span>, InterEmployee.class, pageQuery);<br>        <span class="hljs-keyword">return</span> pageQuery;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> MyPageQuery&lt;InterEmployee&gt; <span class="hljs-title function_">querySummary</span><span class="hljs-params">(<span class="hljs-type">long</span> pageNum, <span class="hljs-type">long</span> pageSize, InterEmployee paramDto, String orderBy)</span> &#123;<br>        MyPageQuery&lt;InterEmployee&gt; myPageQuery = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPageQuery</span>&lt;&gt;();<br>        PageQuery&lt;InterEmployee&gt; pageQuery = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageQuery</span>&lt;InterEmployee&gt;(pageNum, pageSize, paramDto);<br>        pageQuery.setOrderBy(orderBy);<br>        myPageQuery.setPageQuery(pageQuery);<br><br>        interEmployeeDao.pageQuery(<span class="hljs-string">&quot;queryByCondition&quot;</span>, InterEmployee.class, myPageQuery);<br><br>        <span class="hljs-keyword">return</span> myPageQuery;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> List&lt;InterEmployee&gt; <span class="hljs-title function_">queryInterEmployeeList</span><span class="hljs-params">(InterEmployee interEmployee)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeDao.queryByCondition(interEmployee);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> InterEmployee <span class="hljs-title function_">queryInterEmployeeById</span><span class="hljs-params">(String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> (InterEmployee) interEmployeeDao.single(id);<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveInterEmployee</span><span class="hljs-params">(InterEmployee interEmployee)</span> &#123;<br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(interEmployee.getStatus())) &#123;<br>            interEmployee.setStatus(<span class="hljs-string">&quot;1&quot;</span>);<br>        &#125;<br>        interEmployee.setCreatedTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        interEmployee.setUpdatedTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        interEmployeeDao.insert(interEmployee);<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">updateInterEmployee</span><span class="hljs-params">(InterEmployee interEmployee)</span> &#123;<br>        interEmployee.setUpdatedTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeDao.updateTemplateById(interEmployee);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">delInterEmployeeById</span><span class="hljs-params">(String id, String updatedBy)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeDao.delInterEmployeeById(id, updatedBy);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchDelInterEmployeeByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeDao.batchDelInterEmployeeByIds(ids, updatedBy);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>InterEmployeeJobDutyServiceImpl</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.service.impl;<br><br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployeeJobDuty;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.repository.InterEmployeeJobDutyDao;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.service.InterEmployeeJobDutyService;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.SQLManager;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> javax.transaction.Transactional;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployeeJobDuty ServiceImpl</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:24:13</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployeeJobDutyServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InterEmployeeJobDutyService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> SQLManager sqlManager;<br>    <span class="hljs-meta">@Autowired</span>  <br>    <span class="hljs-keyword">private</span> InterEmployeeJobDutyDao interEmployeeJobDutyDao;<br>    <br>    <span class="hljs-keyword">public</span> PageQuery&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(<span class="hljs-type">long</span> pageNum, <span class="hljs-type">long</span> pageSize, InterEmployeeJobDuty paramDto, String orderBy)</span> &#123;<br>        PageQuery&lt;InterEmployeeJobDuty&gt; pageQuery = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageQuery</span>&lt;InterEmployeeJobDuty&gt;(pageNum, pageSize, paramDto);<br>        pageQuery.setOrderBy(orderBy);<br>        sqlManager.pageQuery(<span class="hljs-string">&quot;interEmployeeJobDutyExtra.queryByCondition&quot;</span>, InterEmployeeJobDuty.class, pageQuery);<br>        <span class="hljs-keyword">return</span> pageQuery;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> List&lt;InterEmployeeJobDuty&gt; <span class="hljs-title function_">queryInterEmployeeJobDutyList</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeJobDutyDao.queryByCondition(interEmployeeJobDuty);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> InterEmployeeJobDuty <span class="hljs-title function_">queryInterEmployeeJobDutyById</span><span class="hljs-params">(String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeJobDutyDao.single(id);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveInterEmployeeJobDuty</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span> &#123;<br><br>        interEmployeeJobDutyDao.insert(interEmployeeJobDuty);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">updateInterEmployeeJobDuty</span><span class="hljs-params">(InterEmployeeJobDuty interEmployeeJobDuty)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeJobDutyDao.updateTemplateById(interEmployeeJobDuty);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">delInterEmployeeJobDutyById</span><span class="hljs-params">(String id, String updatedBy)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeJobDutyDao.delInterEmployeeJobDutyById(id, updatedBy);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchDelInterEmployeeJobDutyByIds</span><span class="hljs-params">(List&lt;String&gt; ids, String updatedBy)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> interEmployeeJobDutyDao.batchDelInterEmployeeJobDutyByIds(ids, updatedBy);<br>        <span class="hljs-keyword">if</span>(result &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ProtoBuffer"><a href="#ProtoBuffer" class="headerlink" title="ProtoBuffer"></a>ProtoBuffer</h3><blockquote><p>创建一个<em>protobuf</em>的文件夹，与resources、java平级</p></blockquote><ul><li><p>创建protobuf文件夹</p></li><li><p>创建protobuf文件</p><blockquote><ul><li>interEmployee.proto</li></ul></blockquote><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><span class="hljs-keyword">package</span> beetsqlDemo;<br><span class="hljs-keyword">option</span> java_package = <span class="hljs-string">&quot;com.bossyang.beetsqlDemo.proto.api&quot;</span>;<br><span class="hljs-keyword">option</span> java_outer_classname = <span class="hljs-string">&quot;InterEmployeeProto&quot;</span>;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeDto</span> &#123;<br>    <span class="hljs-type">string</span> id = <span class="hljs-number">1</span>; <span class="hljs-comment">//id</span><br>    <span class="hljs-type">string</span> name = <span class="hljs-number">2</span>; <span class="hljs-comment">//姓名</span><br>    <span class="hljs-type">string</span> email = <span class="hljs-number">3</span>; <span class="hljs-comment">//邮箱</span><br>    <span class="hljs-type">string</span> sex = <span class="hljs-number">4</span>; <span class="hljs-comment">//性别 0-男；1-女；2-未知</span><br>    <span class="hljs-type">string</span> deptId = <span class="hljs-number">5</span>; <span class="hljs-comment">//所属部门id</span><br>    <span class="hljs-type">string</span> orgId = <span class="hljs-number">6</span>; <span class="hljs-comment">//所属机构id</span><br>    <span class="hljs-type">string</span> status = <span class="hljs-number">7</span>; <span class="hljs-comment">//状态 0-无效；1-有效</span><br>    <span class="hljs-type">string</span> createdBy = <span class="hljs-number">8</span>; <span class="hljs-comment">//创建人</span><br>    <span class="hljs-type">string</span> createdTime = <span class="hljs-number">9</span>; <span class="hljs-comment">//创建时间</span><br>    <span class="hljs-type">string</span> updatedBy = <span class="hljs-number">10</span>; <span class="hljs-comment">//更新人</span><br>    <span class="hljs-type">string</span> updatedTime = <span class="hljs-number">11</span>; <span class="hljs-comment">//更新时间</span><br>&#125;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeQueryReq</span> &#123;<br>    <span class="hljs-type">int64</span> page = <span class="hljs-number">1</span>; <span class="hljs-comment">//页码</span><br>    <span class="hljs-type">int64</span> size = <span class="hljs-number">2</span>; <span class="hljs-comment">//每页数量</span><br>    <span class="hljs-type">string</span> id = <span class="hljs-number">3</span>; <span class="hljs-comment">//id</span><br>    <span class="hljs-type">string</span> name = <span class="hljs-number">4</span>; <span class="hljs-comment">//姓名</span><br>    <span class="hljs-type">string</span> email = <span class="hljs-number">5</span>; <span class="hljs-comment">//邮箱</span><br>    <span class="hljs-type">string</span> sex = <span class="hljs-number">6</span>; <span class="hljs-comment">//性别 0-男；1-女；2-未知</span><br>    <span class="hljs-type">string</span> deptId = <span class="hljs-number">7</span>; <span class="hljs-comment">//所属部门id</span><br>    <span class="hljs-type">string</span> orgId = <span class="hljs-number">8</span>; <span class="hljs-comment">//所属机构id</span><br>    <span class="hljs-type">string</span> status = <span class="hljs-number">9</span>; <span class="hljs-comment">//状态 0-无效；1-有效</span><br>    <span class="hljs-type">string</span> createdBy = <span class="hljs-number">10</span>; <span class="hljs-comment">//创建人</span><br>    <span class="hljs-type">string</span> createdTime = <span class="hljs-number">11</span>; <span class="hljs-comment">//创建时间</span><br>    <span class="hljs-type">string</span> updatedBy = <span class="hljs-number">12</span>; <span class="hljs-comment">//更新人</span><br>    <span class="hljs-type">string</span> updatedTime = <span class="hljs-number">13</span>; <span class="hljs-comment">//更新时间</span><br>    <span class="hljs-keyword">repeated</span> <span class="hljs-type">string</span> jobDuties = <span class="hljs-number">14</span>;<span class="hljs-comment">//员工岗位集合</span><br>&#125;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeQueryRes</span> &#123;<br>    <span class="hljs-type">int64</span> total = <span class="hljs-number">1</span>; <span class="hljs-comment">//总数</span><br>    <span class="hljs-type">int64</span> size = <span class="hljs-number">2</span>; <span class="hljs-comment">//当前列表大小</span><br>    <span class="hljs-keyword">repeated</span> InterEmployeeDto list=<span class="hljs-number">3</span>;<span class="hljs-comment">//列表</span><br>    <span class="hljs-type">int64</span> empNums = <span class="hljs-number">4</span>;<span class="hljs-comment">//员工数量</span><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><ul><li>interEmployeeJobDuty.proto</li></ul></blockquote></li></ul><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><span class="hljs-keyword">package</span> beetsqlDemo;<br><span class="hljs-keyword">option</span> java_package = <span class="hljs-string">&quot;com.bossyang.beetsqlDemo.proto.api&quot;</span>;<br><span class="hljs-keyword">option</span> java_outer_classname = <span class="hljs-string">&quot;InterEmployeeJobDutyProto&quot;</span>;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeJobDutyDto</span> &#123;<br>    <span class="hljs-type">string</span> id = <span class="hljs-number">1</span>; <span class="hljs-comment">//id</span><br>    <span class="hljs-type">string</span> empId = <span class="hljs-number">2</span>; <span class="hljs-comment">//员工ID</span><br>    <span class="hljs-type">string</span> empJob = <span class="hljs-number">3</span>; <span class="hljs-comment">//员工岗位 CODE-开发；HR-人事经理</span><br>    <span class="hljs-type">string</span> jobName = <span class="hljs-number">4</span>; <span class="hljs-comment">//岗位名称 CODE-开发；HR-人事经理</span><br>&#125;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeJobDutyQueryReq</span> &#123;<br>    <span class="hljs-type">int64</span> page = <span class="hljs-number">1</span>; <span class="hljs-comment">//页码</span><br>    <span class="hljs-type">int64</span> size = <span class="hljs-number">2</span>; <span class="hljs-comment">//每页数量</span><br>    <span class="hljs-type">string</span> id = <span class="hljs-number">3</span>; <span class="hljs-comment">//id</span><br>    <span class="hljs-type">string</span> empId = <span class="hljs-number">4</span>; <span class="hljs-comment">//员工ID</span><br>    <span class="hljs-type">string</span> empJob = <span class="hljs-number">5</span>; <span class="hljs-comment">//员工岗位 CODE-开发；HR-人事经理</span><br>    <span class="hljs-type">string</span> jobName = <span class="hljs-number">6</span>; <span class="hljs-comment">//岗位名称 CODE-开发；HR-人事经理</span><br>&#125;<br><span class="hljs-keyword">message </span><span class="hljs-title class_">InterEmployeeJobDutyQueryRes</span> &#123;<br>    <span class="hljs-type">int64</span> total = <span class="hljs-number">1</span>; <span class="hljs-comment">//总数</span><br>    <span class="hljs-type">int64</span> size = <span class="hljs-number">2</span>; <span class="hljs-comment">//当前列表大小</span><br>    <span class="hljs-keyword">repeated</span> InterEmployeeJobDutyDto list=<span class="hljs-number">3</span>;<span class="hljs-comment">//列表</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="业务实现"><a href="#业务实现" class="headerlink" title="业务实现"></a>业务实现</h3><blockquote><p>创建api文件夹进行业务实现以及前端交互</p></blockquote><h4 id="业务Service"><a href="#业务Service" class="headerlink" title="业务Service"></a>业务Service</h4><h5 id="业务接口定义"><a href="#业务接口定义" class="headerlink" title="业务接口定义"></a>业务接口定义</h5><blockquote><p>在api下面创建service文件夹，进行业务的接口定义</p></blockquote><ul><li>InterEmployeeApiService</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.api.service;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.common.BaseResponse;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployee;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.proto.api.InterEmployeeProto;<br><span class="hljs-keyword">import</span> com.google.protobuf.InvalidProtocolBufferException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployee ApiService</span><br><span class="hljs-comment"> * 解析&amp;校验&amp;组装</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 13:43:25</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterEmployeeApiService</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据条件查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryReqProto</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployees</span><span class="hljs-params">(InterEmployeeProto.InterEmployeeQueryReq queryReqProto)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据条件查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryReqProto</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">test</span><span class="hljs-params">(InterEmployeeProto.InterEmployeeQueryReq queryReqProto)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id查询</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployeeById</span><span class="hljs-params">(String id)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 保存或更新</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> interEmployee</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">saveOrUpdateInterEmployee</span><span class="hljs-params">(InterEmployee interEmployee)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">delInterEmployeeById</span><span class="hljs-params">(String id)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据id批量逻辑删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ids</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">batchDelInterEmployeeByIds</span><span class="hljs-params">(String ids)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="业务接口实现"><a href="#业务接口实现" class="headerlink" title="业务接口实现"></a>业务接口实现</h5><blockquote><p>在service下面创建impl文件夹，进行业务接口的实现</p></blockquote><ul><li>InterEmployeeApiServiceImpl</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.api.service.impl;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.api.service.InterEmployeeApiService;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.common.BaseResponse;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.common.MyPageQuery;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployee;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.proto.api.InterEmployeeProto;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.service.InterEmployeeService;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.util.UuidUtil;<br><span class="hljs-keyword">import</span> com.google.protobuf.InvalidProtocolBufferException;<br><span class="hljs-keyword">import</span> com.google.protobuf.util.JsonFormat;<br><span class="hljs-keyword">import</span> org.beetl.sql.core.engine.PageQuery;<br><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.util.StringUtils;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployee ApiServiceImpl</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:28:46</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployeeApiServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InterEmployeeApiService</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JsonFormat.<span class="hljs-type">Parser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> JsonFormat.parser().ignoringUnknownFields();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JsonFormat.<span class="hljs-type">Printer</span> <span class="hljs-variable">printer</span> <span class="hljs-operator">=</span> JsonFormat.printer().preservingProtoFieldNames().includingDefaultValueFields();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(<span class="hljs-built_in">this</span>.getClass());<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> InterEmployeeService interEmployeeService;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployees</span><span class="hljs-params">(InterEmployeeProto.InterEmployeeQueryReq queryReqProto)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException &#123;<br>        <span class="hljs-type">InterEmployee</span> <span class="hljs-variable">interEmployee</span> <span class="hljs-operator">=</span> JSONObject.parseObject(JsonFormat.printer().print(queryReqProto), InterEmployee.class);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">orderBy</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot; t.updated_time desc &quot;</span>;<br>        PageQuery&lt;InterEmployee&gt; pageQuery = interEmployeeService.queryByCondition(queryReqProto.getPage(), queryReqProto.getSize(), interEmployee, orderBy);<br>        InterEmployeeProto.InterEmployeeQueryRes.<span class="hljs-type">Builder</span> <span class="hljs-variable">interEmployeeRes</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeQueryRes.newBuilder();<br>        pageQuery.getList().forEach(dto -&gt; &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                InterEmployeeProto.InterEmployeeDto.<span class="hljs-type">Builder</span> <span class="hljs-variable">protoDto</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeDto.newBuilder();<br>                parser.merge(JSONObject.toJSONStringWithDateFormat(dto, <span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>), protoDto);<br>                interEmployeeRes.addList(protoDto);<br>            &#125; <span class="hljs-keyword">catch</span> (InvalidProtocolBufferException e) &#123;<br>                logger.error(<span class="hljs-string">&quot;查询结果转proto转换异常：&quot;</span>, e);<br>                e.printStackTrace();<br>            &#125;<br>        &#125;);<br>        interEmployeeRes.setSize(pageQuery.getPageSize());<br>        interEmployeeRes.setTotal(pageQuery.getTotalRow());<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess(JSONObject.parseObject(printer.print(interEmployeeRes.build())));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">test</span><span class="hljs-params">(InterEmployeeProto.InterEmployeeQueryReq queryReqProto)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException &#123;<br>        <span class="hljs-type">InterEmployee</span> <span class="hljs-variable">interEmployee</span> <span class="hljs-operator">=</span> JSONObject.parseObject(JsonFormat.printer().print(queryReqProto), InterEmployee.class);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">orderBy</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot; t.updated_time desc &quot;</span>;<br>        MyPageQuery&lt;InterEmployee&gt; myPageQuery = interEmployeeService.querySummary(queryReqProto.getPage(), queryReqProto.getSize(), interEmployee, orderBy);<br>        InterEmployeeProto.InterEmployeeQueryRes.<span class="hljs-type">Builder</span> <span class="hljs-variable">interEmployeeRes</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeQueryRes.newBuilder();<br>        <span class="hljs-type">PageQuery</span> <span class="hljs-variable">pageQuery</span> <span class="hljs-operator">=</span> myPageQuery.getPageQuery();<br>        pageQuery.getList().forEach(dto -&gt; &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                InterEmployeeProto.InterEmployeeDto.<span class="hljs-type">Builder</span> <span class="hljs-variable">protoDto</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeDto.newBuilder();<br>                parser.merge(JSONObject.toJSONStringWithDateFormat(dto, <span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>), protoDto);<br>                interEmployeeRes.addList(protoDto);<br>            &#125; <span class="hljs-keyword">catch</span> (InvalidProtocolBufferException e) &#123;<br>                logger.error(<span class="hljs-string">&quot;查询结果转proto转换异常：&quot;</span>, e);<br>                e.printStackTrace();<br>            &#125;<br>        &#125;);<br>        interEmployeeRes.setEmpNums(myPageQuery.getSummaryMap().get(<span class="hljs-string">&quot;empNums&quot;</span>));<br>        interEmployeeRes.setSize(pageQuery.getPageSize());<br>        interEmployeeRes.setTotal(pageQuery.getTotalRow());<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess(JSONObject.parseObject(printer.print(interEmployeeRes.build())));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployeeById</span><span class="hljs-params">(String id)</span> &#123;<br>        <span class="hljs-type">InterEmployee</span> <span class="hljs-variable">interEmployee</span> <span class="hljs-operator">=</span> interEmployeeService.queryInterEmployeeById(id);<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess(JSONObject.parseObject(JSON.toJSONStringWithDateFormat(interEmployee, <span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">saveOrUpdateInterEmployee</span><span class="hljs-params">(InterEmployee interEmployee)</span> &#123;<br>        <span class="hljs-comment">//校验参数</span><br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(interEmployee.getId())) &#123;<span class="hljs-comment">//保存</span><br>            interEmployee.setId(UuidUtil.getUUID32());<br>            interEmployee.setCreatedBy(<span class="hljs-string">&quot;admin&quot;</span>);<br>            interEmployee.setOrgId(UuidUtil.getUUID32());<br>            interEmployeeService.saveInterEmployee(interEmployee);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<span class="hljs-comment">//更新</span><br>            interEmployeeService.updateInterEmployee(interEmployee);<br>        &#125;<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess(JSONObject.parseObject(JSON.toJSONStringWithDateFormat(interEmployee, <span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">delInterEmployeeById</span><span class="hljs-params">(String id)</span> &#123;<br>        interEmployeeService.delInterEmployeeById(id,<span class="hljs-string">&quot;admin&quot;</span>);<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess();<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">batchDelInterEmployeeByIds</span><span class="hljs-params">(String ids)</span> &#123;<br>        interEmployeeService.batchDelInterEmployeeByIds(Arrays.asList(ids.split(<span class="hljs-string">&quot;,&quot;</span>)), <span class="hljs-string">&quot;admin&quot;</span>);<br>        <span class="hljs-keyword">return</span> BaseResponse.setResultSuccess();<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><blockquote><p>在api文件夹下面创建controller文件夹</p></blockquote><ul><li>InterEmployeeController</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.bossyang.beetsqlDemo.api.controller;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.api.service.InterEmployeeApiService;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.common.BaseResponse;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.model.InterEmployee;<br><span class="hljs-keyword">import</span> com.bossyang.beetsqlDemo.proto.api.InterEmployeeProto;<br><span class="hljs-keyword">import</span> com.google.protobuf.InvalidProtocolBufferException;<br><span class="hljs-keyword">import</span> com.google.protobuf.util.JsonFormat;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;<br><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * InterEmployee 接口</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span>: 2020年05月31日 16:28:46</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> V1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/api&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterEmployeeController</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(<span class="hljs-built_in">this</span>.getClass());<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JsonFormat.<span class="hljs-type">Parser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> JsonFormat.parser().ignoringUnknownFields();<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> InterEmployeeApiService interEmployeeApiService;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ENTITY_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;interEmployee&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询机构员工信息</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(value = &quot;/interEmployee/list&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployees</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String reqJson)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException &#123;<br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(reqJson)) &#123;<br>            <span class="hljs-keyword">return</span> BaseResponse.lossParam(<span class="hljs-string">&quot;reqJson&quot;</span>);<br>        &#125;<br>        InterEmployeeProto.InterEmployeeQueryReq.<span class="hljs-type">Builder</span> <span class="hljs-variable">queryReqProto</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeQueryReq.newBuilder();<br>        <span class="hljs-keyword">try</span> &#123;<br>            parser.merge(reqJson, queryReqProto);<br>        &#125; <span class="hljs-keyword">catch</span> (InvalidProtocolBufferException e) &#123;<br>            e.printStackTrace();<br>            logger.error(<span class="hljs-string">&quot;请求Json转换异常&quot;</span>, e);<br>            <span class="hljs-keyword">return</span> BaseResponse.setResultError(<span class="hljs-string">&quot;查询异常&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.queryInterEmployees(queryReqProto.build());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 查询机构员工信息</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(value = &quot;/interEmployee/listTest&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployeesTest</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String reqJson)</span> <span class="hljs-keyword">throws</span> InvalidProtocolBufferException &#123;<br>        <span class="hljs-keyword">if</span>(StringUtils.isEmpty(reqJson)) &#123;<br>            <span class="hljs-keyword">return</span> BaseResponse.lossParam(<span class="hljs-string">&quot;reqJson&quot;</span>);<br>        &#125;<br>        InterEmployeeProto.InterEmployeeQueryReq.<span class="hljs-type">Builder</span> <span class="hljs-variable">queryReqProto</span> <span class="hljs-operator">=</span> InterEmployeeProto.InterEmployeeQueryReq.newBuilder();<br>        <span class="hljs-keyword">try</span> &#123;<br>            parser.merge(reqJson, queryReqProto);<br>        &#125; <span class="hljs-keyword">catch</span> (InvalidProtocolBufferException e) &#123;<br>            e.printStackTrace();<br>            logger.error(<span class="hljs-string">&quot;请求Json转换异常&quot;</span>, e);<br>            <span class="hljs-keyword">return</span> BaseResponse.setResultError(<span class="hljs-string">&quot;查询异常&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.test(queryReqProto.build());<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(value = &quot;/interEmployee/info/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">queryInterEmployeeById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.queryInterEmployeeById(id);<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping(value = &quot;/interEmployee/save&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">saveInterEmployee</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> InterEmployee interEmployee)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.saveOrUpdateInterEmployee(interEmployee);<br>    &#125;<br>    <span class="hljs-meta">@PutMapping(value = &quot;/interEmployee/update&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">updateInterEmployee</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> InterEmployee interEmployee)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.saveOrUpdateInterEmployee(interEmployee);<br>    &#125;<br><br>    <span class="hljs-meta">@DeleteMapping(value = &quot;/interEmployee/del/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> BaseResponse&lt;JSONObject&gt; <span class="hljs-title function_">delInterEmployee</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> interEmployeeApiService.delInterEmployeeById(id);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>启动运行application</p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><blockquote><p>本案例采用DocwayAPI接口管理平台存储和定义接口，具体接口如下：</p><p><img src="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007194602.png" srcset="/img/loading.gif" lazyload alt="image-20201007194602045"></p></blockquote><ul><li>运行查询接口进行测试</li></ul><p><img src="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195402.png" srcset="/img/loading.gif" lazyload alt="image-20201007195402355"></p><p><img src="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195655.png" srcset="/img/loading.gif" lazyload alt="image-20201007195654916"></p><p>响应结果：</p><p><img src="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195737.png" srcset="/img/loading.gif" lazyload alt="image-20201007195736833"></p><p>后台运行结果：</p><p><img src="https://gitee.com/yangxiangnanWorkSpace/uploadImages/raw/master/static/20201007195837.png" srcset="/img/loading.gif" lazyload alt="image-20201007195836747"></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/" class="category-chain-item">好好码代码吖</a> <span>></span> <a href="/categories/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/JAVA/" class="category-chain-item">JAVA</a> <span>></span> <a href="/categories/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/JAVA/Beetl-BeetlSql/" class="category-chain-item">Beetl&amp;BeetlSql</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/BeetlSql/">#BeetlSql</a> <a href="/tags/Beetl/">#Beetl</a> <a href="/tags/ProtoBuffer/">#ProtoBuffer</a></div></div><div class="license-box my-3"><div class="license-title"><div>BeetlSql&amp;ProtoBuffer实践Demo</div><div>https://github.com/yangxiangnanwill/yangxiangnanwill.github.io/2023/05/28/好好码代码吖/JAVA/Beetl&amp;BeetlSql/BeetlSql&amp;ProtoBuffer实践Demo/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>will</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年5月28日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/JAVA/Beetl&amp;BeetlSql/BeetlSql/" title="BeetlSql"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">BeetlSql</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/05/28/%E5%A5%BD%E5%A5%BD%E7%A0%81%E4%BB%A3%E7%A0%81%E5%90%96/Docker/Docker(8)-%E5%AE%89%E8%A3%85nacos/" title="Docker(8)-安装nacos"><span class="hidden-mobile">Docker(8)-安装nacos</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing;(t=t.getElementById("subtitle"))&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){var t;"tocbot"in window&&(tocbot.refresh(),0!==(t=jQuery("#toc")).length)&&tocbot&&0<t.find(".toc-list-item").length&&t.css("visibility","visible")}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>